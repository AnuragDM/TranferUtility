(function(_ds){var window=this;'use strict';var L2=function(){var a=_ds.S.apply(this,arguments)||this;a.j=new _ds.as;a.h=!1;return a},O2=function(a){_ds.Q(a,function c(){var d=this,e,g,k,l,m;return _ds.F(c,function(n){switch(n.h){case 1:return _ds.x(n,DevsiteApp.whenReady(),2);case 2:var q,r=Number(null!==(q=d.getAttribute("threshold"))&&void 0!==q?q:void 0);e=isNaN(r)?.8:r;g=d.hasAttribute("unfiltered");d.j.resolve();_ds.A(n,3);return _ds.x(n,DevsiteApp.intersectionEnterForElement(d,e),5);case 5:_ds.C(n,4);break;case 3:_ds.E(n),
d.h=!0;case 4:l=null;if(g)k="devsite-analytics-observation-unfiltered",l=M2(d);else{k="devsite-analytics-observation";var t,v,w;q=null!==(t=N2(d,"event-category"))&&void 0!==t?t:"Site-Wide Custom Events";t=null!==(v=N2(d,"event-action"))&&void 0!==v?v:"viewed";null!==(w=N2(d,"event-label"))&&void 0!==w?v=w:0<d.children.length?(w=d.children[0],v=w.className,w=w.tagName,v="Element: "+(v?v:w)):v="Element: (text node)";w=N2(d,"event-value");var z=void 0;null!==w&&void 0!==w&&(z=null!==(r=Number(w))&&
void 0!==r?r:void 0);l={category:q,action:t,label:v,value:z}}null!==l&&(m={detail:l,bubbles:!0},d.dispatchEvent(new CustomEvent(k,m)));_ds.y(n)}})})},N2=function(a,b){var c,d=a.getAttribute(b);a.h&&(d=null!==(c=a.getAttribute("fallback-"+b))&&void 0!==c?c:d);return d},M2=function(a){function b(l,m){m=_ds.Xd(l.name.slice(m.length));c[m]=l.value}var c={},d=[],e=[];if(a.hasAttributes())for(var g=0;g<a.attributes.length;++g){var k=a.attributes[g];k.specified&&(k.name.startsWith("event-data-")?d.push(k):
k.name.startsWith("fallback-event-data-")&&e.push(k))}d=_ds.p(d);for(g=d.next();!g.done;g=d.next())b(g.value,"event-data-");if(a.h)for(a=_ds.p(e),e=a.next();!e.done;e=a.next())b(e.value,"fallback-event-data-");return 0===Object.keys(c).length?(console.error('DevsiteVisibilityAnalytics element configured incorrectly for unfiltered events; specify "event-data-" attributes.'),null):{eventData:JSON.stringify(c)}};_ds.u(L2,_ds.S);L2.prototype.connectedCallback=function(){O2(this)};
L2.prototype.whenReady=function(){return this.j.promise};try{window.customElements.define("devsite-visibility-analytics",L2)}catch(a){console.warn("devsite.app.customElement.DevsiteVisibilityAnalytics",a)};})(_ds_www);
